<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§ÙÙ‡ Ø³ÛŒÙ…ÙˆÙ†</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .navbar {
            background-color: #343a40;
        }
        .navbar-brand {
            font-weight: bold;
        }
        .table-responsive {
            margin-top: 20px;
        }
        .btn-action {
            margin: 0 5px;
        }
        .management-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
        }
        .category-list, .subcategory-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
        }
        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
            border-radius: 4px;
            margin-bottom: 5px;
        }
        .list-item:hover {
            background-color: #f1f3f5;
        }
    </style>
</head>
<body>

    <!-- Ù†ÙˆØ§Ø± Ø¨Ø§Ù„Ø§ -->
    <nav class="navbar navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand text-white" href="#">
                <i class="bi bi-shield-lock"></i> Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§ÙÙ‡ Ø³ÛŒÙ…ÙˆÙ†
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Ø¨Ø®Ø´ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ -->
        <div class="row">
            <div class="col-md-6">
                <div class="management-section">
                    <h5><i class="bi bi-tags"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ</h5>
                    <div class="input-group mb-3">
                        <input type="text" id="newCategoryInput" class="form-control" placeholder="Ù†Ø§Ù… Ø¯Ø³ØªÙ‡ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...">
                        <button class="btn btn-outline-secondary" type="button" onclick="addNewCategory()">Ø§ÙØ²ÙˆØ¯Ù†</button>
                    </div>
                    <div id="categoryList" class="category-list">
                        <!-- Ù„ÛŒØ³Øª Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="management-section">
                    <h5><i class="bi bi-tags-fill"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§</h5>
                    <div class="input-group mb-3">
                        <select id="parentCategoryForSub" class="form-select">
                            <option value="">Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                        </select>
                        <input type="text" id="newSubcategoryInput" class="form-control" placeholder="Ù†Ø§Ù… Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...">
                        <button class="btn btn-outline-secondary" type="button" onclick="addNewSubcategory()">Ø§ÙØ²ÙˆØ¯Ù†</button>
                    </div>
                    <div id="subcategoryList" class="subcategory-list">
                        <!-- Ù„ÛŒØ³Øª Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯ -->
        <button class="btn btn-primary mt-4" data-bs-toggle="modal" data-bs-target="#productModal" onclick="openAddModal()">
            <i class="bi bi-plus-circle"></i> Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯
        </button>

        <!-- Ø¬Ø¯ÙˆÙ„ Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª -->
        <div class="table-responsive">
            <table class="table table-striped table-hover align-middle">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„</th>
                        <th scope="col">Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ</th>
                        <th scope="col">Ø²ÛŒØ±Ø¯Ø³ØªÙ‡</th>
                        <th scope="col">Ù‚ÛŒÙ…Øª</th>
                        <th scope="col">Ù…ÙˆØ¬ÙˆØ¯ÛŒ</th>
                        <th scope="col">ÙˆÛŒÚ˜Ù‡</th>
                        <th scope="col" class="text-center">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>
                <tbody id="productTableBody">
                    <!-- Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø¬Ø§ÙˆØ§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ (Ù¾Ù†Ø¬Ø±Ù‡ Ù¾Ø§Ù¾â€ŒØ¢Ù¾) Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù†/ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„ -->
    <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalLabel">Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="productForm">
                        <input type="hidden" id="productId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„</label>
                                <input type="text" class="form-control" id="name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="price" class="form-label">Ù‚ÛŒÙ…Øª</label>
                                <input type="number" class="form-control" id="price" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ</label>
                                <!-- ØªØºÛŒÛŒØ±: Ø§Ø² select Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… -->
                                <select id="category" class="form-select" required>
                                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="sub_category" class="form-label">Ø²ÛŒØ±Ø¯Ø³ØªÙ‡</label>
                                <!-- ØªØºÛŒÛŒØ±: Ø§Ø² select Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… -->
                                <select id="sub_category" class="form-select" required>
                                    <option value="">Ø§Ø¨ØªØ¯Ø§ Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="stock_quantity" class="form-label">Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§Ù†Ø¨Ø§Ø±</label>
                                <input type="number" class="form-control" id="stock_quantity" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="image" class="form-label">Ø¢Ø¯Ø±Ø³ ØªØµÙˆÛŒØ±</label>
                                <input type="url" class="form-control" id="image">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="description" class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
                            <textarea class="form-control" id="description" rows="3"></textarea>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="is_special">
                            <label class="form-check-label" for="is_special">
                                Ù…Ø­ØµÙˆÙ„ ÙˆÛŒÚ˜Ù‡ Ø§Ø³Øª
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø§Ù†ØµØ±Ø§Ù</button>
                    <button type="button" class="btn btn-primary" onclick="saveProduct()">Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­ØµÙˆÙ„</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const API_URL = 'http://localhost:5000/api';
        let currentEditingId = null;
        let products = [];
        let allCategories = [];
        let subcategoriesByCategory = {}; 

        console.log('ğŸš€ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯.');

        document.addEventListener('DOMContentLoaded', async () => {
            console.log('ğŸ“„ DOM Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯. Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯Ù‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡...');
            await fetchProducts();
            await fetchCategoriesAndSubcategories();
        });

        // --- ØªÙˆØ§Ø¨Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ Ùˆ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ ---

        async function fetchCategoriesAndSubcategories() {
            console.log('\n\n===== ğŸ“ [ADMIN] Ø´Ø±ÙˆØ¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ =====');
            try {
                if (!products || products.length === 0) {
                    console.warn('âš ï¸ Ù…ØªØºÛŒØ± products Ø®Ø§Ù„ÛŒ Ø§Ø³Øª. Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ø±Ø¯.');
                    return;
                }
                
                const productCategories = [...new Set(products.map(p => p.category))].sort();
                
                // Ø§Ø¨ØªØ¯Ø§ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø§Ø² Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
                products.forEach(p => {
                    if (p.category && p.sub_category) {
                        // *** Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù„ÛŒØ¯ÛŒ: Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± ÙØ¹Ù„ÛŒ Ø¢Ø±Ø§ÛŒÙ‡ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ø¨Ù‡ Set ØªØ¨Ø¯ÛŒÙ„ Ú©Ù† ***
                        if (Array.isArray(subcategoriesByCategory[p.category])) {
                            subcategoriesByCategory[p.category] = new Set(subcategoriesByCategory[p.category]);
                        }
                        // Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ØŒ ÛŒÚ© Set Ø¬Ø¯ÛŒØ¯ Ø¨Ø³Ø§Ø²
                        if (!subcategoriesByCategory[p.category]) {
                            subcategoriesByCategory[p.category] = new Set();
                        }
                        subcategoriesByCategory[p.category].add(p.sub_category);
                    }
                });

                try {
                    console.log('ğŸ“¡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø§Ø² Ø³Ø±ÙˆØ±...');
                    const customResponse = await fetch(`${API_URL}/admin/custom-categories`);
                    
                    if (!customResponse.ok) {
                        const errorText = await customResponse.text();
                        throw new Error(`Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±: ${customResponse.status} ${customResponse.statusText}. Ù¾Ø§Ø³Ø®: ${errorText}`);
                    }
                    
                    const customData = await customResponse.json();
                    console.log('âœ… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯:', customData);

                    const customCategories = customData.filter(item => item.type === 'category').map(item => item.name);
                    allCategories = [...new Set([...productCategories, ...customCategories])].sort();

                    customData.filter(item => item.type === 'subcategory').forEach(item => {
                        // *** Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù„ÛŒØ¯ÛŒ: Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± ÙØ¹Ù„ÛŒ Ø¢Ø±Ø§ÛŒÙ‡ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ø¨Ù‡ Set ØªØ¨Ø¯ÛŒÙ„ Ú©Ù† ***
                        if (Array.isArray(subcategoriesByCategory[item.parent_category])) {
                            subcategoriesByCategory[item.parent_category] = new Set(subcategoriesByCategory[item.parent_category]);
                        }
                        if (!subcategoriesByCategory[item.parent_category]) {
                            subcategoriesByCategory[item.parent_category] = new Set();
                        }
                        subcategoriesByCategory[item.parent_category].add(item.name);
                    });

                } catch (error) {
                    console.error('!!! ERROR Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ !!!', error.message);
                    console.error('Stack Trace:', error.stack);
                    allCategories = productCategories;
                }
                
                // ØªØ¨Ø¯ÛŒÙ„ Set Ù‡Ø§ Ø¨Ù‡ Ø¢Ø±Ø§ÛŒÙ‡ Ùˆ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ
                for (const cat in subcategoriesByCategory) {
                    subcategoriesByCategory[cat] = Array.from(subcategoriesByCategory[cat]).sort();
                }

                console.log('âœ… ØªÙ…Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ:', allCategories);
                console.log('ğŸ“Š Ø³Ø§Ø®ØªØ§Ø± Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§:', subcategoriesByCategory);

                renderCategoryList();
                renderSubcategoryList();
                populateCategoryDropdowns();
                console.log('===== ğŸ“ [ADMIN] Ù¾Ø§ÛŒØ§Ù† Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ =====\n\n');
            } catch (error) {
                console.error('!!! ERROR Ø¯Ø± fetchCategoriesAndSubcategories !!!', error.message);
                console.error('Stack Trace:', error.stack);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§! Ø¬Ø²Ø¦ÛŒØ§Øª Ø¯Ø± Ú©Ù†Ø³ÙˆÙ„.');
            }
        }

        function renderCategoryList() {
            console.log('--- Ø±Ù†Ø¯Ø± Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ ---');
            const listContainer = document.getElementById('categoryList');
            listContainer.innerHTML = '';
            allCategories.forEach(cat => {
                const count = products.filter(p => p.category === cat).length;
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <span>${cat}</span>
                    <small class="text-muted">${count} Ù…Ø­ØµÙˆÙ„</small>
                `;
                listContainer.appendChild(item);
            });
        }

        function renderSubcategoryList() {
            console.log('\n\n===== ğŸ“ [ADMIN] Ø´Ø±ÙˆØ¹ Ø±Ù†Ø¯Ø± Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ =====');
            const listContainer = document.getElementById('subcategoryList');
            listContainer.innerHTML = '';
            
            const allSubcategories = new Set();
            for (const cat in subcategoriesByCategory) {
                subcategoriesByCategory[cat].forEach(sub => allSubcategories.add(sub));
            }

            allSubcategories.forEach(sub => {
                let countInfo = '0 Ù…Ø­ØµÙˆÙ„';
                const categoriesWithSub = [];
                for (const cat in subcategoriesByCategory) {
                    if (subcategoriesByCategory[cat].includes(sub)) {
                        const productCount = products.filter(p => p.category === cat && p.sub_category === sub).length;
                        if (productCount > 0) {
                            categoriesWithSub.push(`${productCount} Ø¯Ø± ${cat}`);
                        }
                    }
                }
                if (categoriesWithSub.length > 0) {
                    countInfo = categoriesWithSub.join('ØŒ ');
                }
                
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <span>${sub}</span>
                    <small class="text-muted">${countInfo}</small>
                `;
                listContainer.appendChild(item);
            });
            console.log('===== ğŸ“ [ADMIN] Ù¾Ø§ÛŒØ§Ù† Ø±Ù†Ø¯Ø± Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ =====\n\n');
        }
                
        function populateCategoryDropdowns() {
            console.log('--- Ù¾Ø± Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø´ÙˆÛŒÛŒ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ ---');
            const categoryDropdown = document.getElementById('category');
            categoryDropdown.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>';
            allCategories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat;
                option.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
                categoryDropdown.appendChild(option);
            });

            const parentCategoryDropdown = document.getElementById('parentCategoryForSub');
            parentCategoryDropdown.innerHTML = '<option value="">Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>';
            allCategories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat;
                option.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
                parentCategoryDropdown.appendChild(option);
            });
            console.log('âœ… Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø´ÙˆÛŒÛŒ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ Ù¾Ø± Ø´Ø¯.');
        }

        async function addNewCategory() {
            console.log('--- Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡ Ø¬Ø¯ÛŒØ¯ ---');
            const input = document.getElementById('newCategoryInput');
            const categoryName = input.value.trim();
            
            if (!categoryName) {
                alert('Ù†Ø§Ù… Ø¯Ø³ØªÙ‡ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø®Ø§Ù„ÛŒ Ø¨Ø§Ø´Ø¯.');
                return;
            }
            
            if (allCategories.includes(categoryName)) {
                alert('Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡ Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.');
                return;
            }
            
            try {
                console.log(`ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡ "${categoryName}"...`);
                const response = await fetch(`${API_URL}/admin/categories`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: categoryName })
                });
                
                const data = await response.json();

                if (response.ok) {
                    input.value = '';
                    console.log(`âœ… Ø¯Ø³ØªÙ‡ "${categoryName}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ø³Ø±ÙˆØ± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯.`);
                    alert(`Ø¯Ø³ØªÙ‡ "${categoryName}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`);
                    await fetchCategoriesAndSubcategories();
                    populateCategoryDropdowns();
                } else {
                    console.error('!!! ERROR Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø³ØªÙ‡ Ø¬Ø¯ÛŒØ¯ !!!', data.message);
                    alert(data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÙ‡ Ø¬Ø¯ÛŒØ¯!');
                }
            } catch (error) {
                console.error('!!! ERROR Ø¯Ø± addNewCategory !!!', error.message);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±!');
            }
        }

        async function addNewSubcategory() {
            console.log('--- Ø§ÙØ²ÙˆØ¯Ù† Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¬Ø¯ÛŒØ¯ ---');
            const parentCategory = document.getElementById('parentCategoryForSub').value;
            const input = document.getElementById('newSubcategoryInput');
            const subcategoryName = input.value.trim();
            
            if (!parentCategory || !subcategoryName) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ Ùˆ Ù†Ø§Ù… Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
                return;
            }
            
            if (subcategoriesByCategory[parentCategory] && subcategoriesByCategory[parentCategory].includes(subcategoryName)) {
                alert('Ø§ÛŒÙ† Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.');
                return;
            }
            
            try {
                console.log(`ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ "${subcategoryName}" Ø¨Ù‡ Ø¯Ø³ØªÙ‡ "${parentCategory}"...`);
                const response = await fetch(`${API_URL}/admin/subcategories`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: subcategoryName, parentCategory: parentCategory })
                });
                
                const data = await response.json();

                if (response.ok) {
                    input.value = '';
                    console.log(`âœ… Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ "${subcategoryName}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ø³Ø±ÙˆØ± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯.`);
                    alert(`Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ "${subcategoryName}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`);
                    await fetchCategoriesAndSubcategories();
                    populateCategoryDropdowns();
                } else {
                    console.error('!!! ERROR Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¬Ø¯ÛŒØ¯ !!!', data.message);
                    alert(data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø§ÙØ²ÙˆØ¯Ù† Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¬Ø¯ÛŒØ¯!');
                }
            } catch (error) {
                console.error('!!! ERROR Ø¯Ø± addNewSubcategory !!!', error.message);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±!');
            }
        }

        // --- ØªÙˆØ§Ø¨Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª ---

        async function fetchProducts() {
            console.log('\n\n===== ğŸ›’ [ADMIN] Ø´Ø±ÙˆØ¹ Ø¯Ø±ÛŒØ§ÙØª Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§Ø² Ø³Ø±ÙˆØ± =====');
            try {
                console.log(`ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ø¨Ù‡: ${API_URL}/menu`);
                const response = await fetch(`${API_URL}/menu`);
                console.log('ğŸ“¨ Ù¾Ø§Ø³Ø® Ø³Ø±ÙˆØ± Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯:', response.status, response.statusText);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ JSON Ø®Ø§Ù… Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯:', data);
                console.log('ğŸ“Š ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡:', data.length);
                
                products = data;
                console.log('âœ… Ù…ØªØºÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„ products Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯. ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„:', products.length);

                const tableBody = document.getElementById('productTableBody');
                tableBody.innerHTML = '';
                products.forEach(product => {
                    const row = `
                        <tr>
                            <th scope="row">${product.id}</th>
                            <td>${product.name}</td>
                            <td>${product.category}</td>
                            <td>${product.sub_category || 'N/A'}</td>
                            <td>${product.price}</td>
                            <td>${product.stock_quantity}</td>
                            <td>${product.is_special ? '<i class="bi bi-star-fill text-warning"></i>' : ''}</td>
                            <td class="text-center">
                                <button class="btn btn-sm btn-warning btn-action" onclick="openEditModal(${product.id})">
                                    <i class="bi bi-pencil"></i>
                                </button>
                                <button class="btn btn-sm btn-danger btn-action" onclick="deleteProduct(${product.id})">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                    tableBody.innerHTML += row;
                });
                console.log('âœ… Ø¬Ø¯ÙˆÙ„ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±Ù†Ø¯Ø± Ø´Ø¯.');
                console.log('===== ğŸ›’ [ADMIN] Ù¾Ø§ÛŒØ§Ù† Ø¯Ø±ÛŒØ§ÙØª Ù…Ø­ØµÙˆÙ„Ø§Øª =====\n\n');
            } catch (err) {
                console.error('!!! ERROR Ø¯Ø± fetchProducts !!!', err.message);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„Ø§Øª!');
            }
        }
                    
        function openAddModal() {
            console.log('--- Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…ÙˆØ¯Ø§Ù„ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ ---');
            currentEditingId = null;
            document.getElementById('productForm').reset();
            document.getElementById('productModalLabel').innerText = 'Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯';
            document.getElementById('sub_category').innerHTML = '<option value="">Ø§Ø¨ØªØ¯Ø§ Ø¯Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>';
        }

        async function openEditModal(id) {
            console.log(`--- Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…ÙˆØ¯Ø§Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ø¢ÛŒâ€ŒØ¯ÛŒ: ${id} ---`);
            currentEditingId = id;
            document.getElementById('productModalLabel').innerText = 'ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„';
            try {
                console.log(`ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª GET Ø¨Ù‡: ${API_URL}/menu/${id}`);
                const response = await fetch(`${API_URL}/menu/${id}`);
                const product = await response.json();
                console.log('âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­ØµÙˆÙ„ Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯:', product);

                document.getElementById('name').value = product.name;
                document.getElementById('price').value = product.price;
                document.getElementById('category').value = product.category;
                
                updateSubcategoryDropdown(product.category);
                document.getElementById('sub_category').value = product.sub_category;

                document.getElementById('stock_quantity').value = product.stock_quantity;
                document.getElementById('image').value = product.image;
                document.getElementById('description').value = product.description;
                document.getElementById('is_special').checked = product.is_special;

                const modal = new bootstrap.Modal(document.getElementById('productModal'));
                modal.show();
                console.log('âœ… Ù…ÙˆØ¯Ø§Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¨Ø§Ø² Ø´Ø¯.');
            } catch (error) {
                console.error('!!! ERROR Ø¯Ø± openEditModal !!!', error.message);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø­ØµÙˆÙ„ Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´!');
            }
        }

        function updateSubcategoryDropdown(selectedCategory) {
            console.log(`--- Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„ÛŒØ³Øª Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÙ‡: ${selectedCategory} ---`);
            const subcategoryDropdown = document.getElementById('sub_category');
            subcategoryDropdown.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>';
            
            const subcategories = subcategoriesByCategory[selectedCategory] || [];
            console.log(`Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ ÛŒØ§ÙØª Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ "${selectedCategory}":`, subcategories);

            subcategories.forEach(sub => {
                const option = document.createElement('option');
                option.value = sub;
                option.textContent = sub.charAt(0).toUpperCase() + sub.slice(1);
                subcategoryDropdown.appendChild(option);
            });
            console.log('âœ… Ù„ÛŒØ³Øª Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯.');
        }

        async function saveProduct() {
            console.log('\n\n===== ğŸ’¾ [ADMIN] Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­ØµÙˆÙ„ =====');
            const productData = {
                name: document.getElementById('name').value,
                price: parseFloat(document.getElementById('price').value),
                category: document.getElementById('category').value,
                sub_category: document.getElementById('sub_category').value,
                stock_quantity: parseInt(document.getElementById('stock_quantity').value),
                image: document.getElementById('image').value,
                description: document.getElementById('description').value,
                is_special: document.getElementById('is_special').checked,
            };
            console.log('ğŸ“ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­ØµÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡:', productData);

            if (!productData.name || !productData.category || !productData.price) {
                console.warn('âš ï¸ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚: ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.');
                alert('Ù„Ø·ÙØ§Ù‹ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù†Ø§Ù…ØŒ Ø¯Ø³ØªÙ‡ Ùˆ Ù‚ÛŒÙ…Øª Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.');
                return;
            }

            try {
                let response;
                if (currentEditingId) {
                    console.log(`ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª PUT Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„ ${currentEditingId}...`);
                    response = await fetch(`${API_URL}/admin/menu/${currentEditingId}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(productData)
                    });
                } else {
                    console.log('ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª POST Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„...');
                    response = await fetch(`${API_URL}/admin/menu`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(productData)
                    });
                }
                
                console.log('ğŸ“¨ Ù¾Ø§Ø³Ø® Ø³Ø±ÙˆØ± Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­ØµÙˆÙ„:', response.status, response.statusText);

                if (response.ok) {
                    console.log('âœ… Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ø³Ø±ÙˆØ± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯.');
                    const modal = bootstrap.Modal.getInstance(document.getElementById('productModal'));
                    modal.hide();
                    
                    console.log('ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†...');
                    await fetchProducts();
                    await fetchCategoriesAndSubcategories();
                    console.log('âœ… Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯.');
                    
                    alert(currentEditingId ? 'Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯!' : 'Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯!');
                } else {
                    const errorData = await response.json();
                    console.error('!!! ERROR Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­ØµÙˆÙ„ !!!', response.status, errorData);
                    alert('Ø®Ø·Ø§ÛŒÛŒ Ø¯Ø± Ø¹Ù…Ù„ÛŒØ§Øª Ø±Ø® Ø¯Ø§Ø¯! Ø¬Ø²Ø¦ÛŒØ§Øª Ø¯Ø± Ú©Ù†Ø³ÙˆÙ„.');
                }
            } catch (error) {
                console.error('!!! ERROR Ø¯Ø± saveProduct !!!', error.message);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­ØµÙˆÙ„!');
            }
            console.log('===== ğŸ’¾ [ADMIN] Ù¾Ø§ÛŒØ§Ù† ÙØ±Ø¢ÛŒÙ†Ø¯ Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­ØµÙˆÙ„ =====\n\n');
        }        

        async function deleteProduct(id) {
            console.log('\n\n===== ğŸ—‘ï¸ [ADMIN] Ø´Ø±ÙˆØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„ =====');
            console.log(`ğŸ¯ Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ø¢ÛŒâ€ŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù: ${id}`);
            
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) {
                try {
                    console.log(`ğŸ“¡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª DELETE Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„ ${id}...`);
                    const response = await fetch(`${API_URL}/admin/menu/${id}`, {
                        method: 'DELETE'
                    });
                    console.log('ğŸ“¨ Ù¾Ø§Ø³Ø® Ø³Ø±ÙˆØ± Ø§Ø² Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„:', response.status, response.statusText);

                    if (response.ok) {
                        console.log('âœ… Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø² Ø³Ø±ÙˆØ± Ø­Ø°Ù Ø´Ø¯.');
                        
                        console.log('ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†...');
                        await fetchProducts();
                        await fetchCategoriesAndSubcategories();
                        console.log('âœ… Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯.');
                        
                        alert('Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯!');
                    } else {
                        const errorData = await response.json();
                        console.error('!!! ERROR Ø¯Ø± Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„ !!!', response.status, errorData);
                        alert('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„! Ø¬Ø²Ø¦ÛŒØ§Øª Ø¯Ø± Ú©Ù†Ø³ÙˆÙ„.');
                    }
                } catch (error) {
                    console.error('!!! ERROR Ø¯Ø± deleteProduct !!!', error.message);
                    alert('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„!');
                }
            } else {
                console.log('âŒ Ú©Ø§Ø±Ø¨Ø± Ø¹Ù…Ù„ÛŒØ§Øª Ø­Ø°Ù Ø±Ø§ Ù„ØºÙˆ Ú©Ø±Ø¯.');
            }
            console.log('===== ğŸ—‘ï¸ [ADMIN] Ù¾Ø§ÛŒØ§Ù† ÙØ±Ø¢ÛŒÙ†Ø¯ Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„ =====\n\n');
        }
                    
        document.getElementById('category').addEventListener('change', (e) => {
            updateSubcategoryDropdown(e.target.value);
        });
    </script>
</body>
</html>